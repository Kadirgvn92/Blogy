
@model ResultCommentViewModel

<div class="pt-5 comment-wrap">
    <h3 class="mb-5 heading">Yorumlar (@Model.ArticleCount)</h3>
    <ul class="comment-list">
        @foreach(var item in Model.Comment)
        {
            <li class="comment">
                <div class="vcard">
                    <img src="/users/@item.Image" alt="Image placeholder">
                </div>
                <div class="comment-body">
                    <h3>@item.FullName</h3>
                    <div class="meta">@item.CommentDate.ToString("dddd, dd MMMM yyyy") </div>
                    <p>@item.Content</p>
                </div>
            </li>

        }
       
    </ul>
    <!-- END comment-list -->
    <div class="comment-form-wrap pt-5" id="ReplyComment">
        <h3 class="mb-5">Bir Yorum Yazın..</h3>
        <form method="post" asp-action="AddComment" asp-controller="Comment" class="p-5 bg-light">
            <input type="hidden" name="ArticleID" value="@Model.ArticleID" />
            <div class="form-group">
                <label for="name">Ad Soyad *</label>
                <input type="text" class="form-control" required name="FullName" id="name">
            </div>
            <div class="form-group">
                <label for="email">Mail Adresi *</label>
                <input type="email" class="form-control" required name="Email" id="email">
            </div>

            <div class="form-group">
                <label for="message">Yorumunuz</label>
                <textarea id="message" cols="30" rows="10" required name="Content" class="form-control"></textarea>
            </div>
            <div class="form-group">
                <input type="submit" value="Gönder" class="btn btn-primary">
            </div>
        </form>
    </div>
</div>

<script>
    $(document).ready(function () {
        $('#commentForm').submit(function (e) {
            e.preventDefault(); // Formun normal submit işlemini durdur

            // Form verilerini al
            var formData = {
                ArticleID: $('#ArticleID').val(),
                FullName: $('#name').val(),
                Email: $('#email').val(),
                Content: $('#message').val()
            };

            // Ajax isteği gönder
            $.ajax({
                type: 'POST',
                url: '@Url.Action("AddComment", "Comment")', // AddComment action'ının url'sini belirtin
                data: formData,
                success: function (response) {
                    // İşlem başarılıysa yapılacak işlemler burada
                    console.log(response); // İsteğin dönüşünü kontrol etmek için konsola yazdır
                    alert('Yorum başarıyla eklendi!');
                    // Yorum eklendikten sonra sayfayı yenileme ya da başka bir işlem yapabilirsiniz
                },
                error: function (xhr, status, error) {
                    // İsteğin başarısız olması durumunda yapılacak işlemler burada
                    console.error(xhr.responseText); // Hata mesajını konsola yazdır
                    alert('Yorum eklenirken bir hata oluştu!');
                }
            });
        });
    });
</script>


@* <li class="comment">
    <div class="vcard">
        <img src="images/person_2.jpg" alt="Image placeholder">
    </div>
    <div class="comment-body">
        <h3>Jean Doe</h3>
        <div class="meta">January 9, 2018 at 2:21pm</div>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Pariatur quidem laborum necessitatibus, ipsam impedit vitae autem, eum officia, fugiat saepe enim sapiente iste iure! Quam voluptas earum impedit necessitatibus, nihil?</p>
        <p><a href="#" class="reply rounded">Reply</a></p>
    </div>

    <ul class="children">
        <li class="comment">
            <div class="vcard">
                <img src="images/person_3.jpg" alt="Image placeholder">
            </div>
            <div class="comment-body">
                <h3>Jean Doe</h3>
                <div class="meta">January 9, 2018 at 2:21pm</div>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Pariatur quidem laborum necessitatibus, ipsam impedit vitae autem, eum officia, fugiat saepe enim sapiente iste iure! Quam voluptas earum impedit necessitatibus, nihil?</p>
                <p><a href="#" class="reply rounded">Reply</a></p>
            </div>


            <ul class="children">
                <li class="comment">
                    <div class="vcard">
                        <img src="images/person_4.jpg" alt="Image placeholder">
                    </div>
                    <div class="comment-body">
                        <h3>Jean Doe</h3>
                        <div class="meta">January 9, 2018 at 2:21pm</div>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Pariatur quidem laborum necessitatibus, ipsam impedit vitae autem, eum officia, fugiat saepe enim sapiente iste iure! Quam voluptas earum impedit necessitatibus, nihil?</p>
                        <p><a href="#" class="reply rounded">Reply</a></p>
                    </div>

                    <ul class="children">
                        <li class="comment">
                            <div class="vcard">
                                <img src="images/person_5.jpg" alt="Image placeholder">
                            </div>
                            <div class="comment-body">
                                <h3>Jean Doe</h3>
                                <div class="meta">January 9, 2018 at 2:21pm</div>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Pariatur quidem laborum necessitatibus, ipsam impedit vitae autem, eum officia, fugiat saepe enim sapiente iste iure! Quam voluptas earum impedit necessitatibus, nihil?</p>
                                <p><a href="#" class="reply rounded">Reply</a></p>
                            </div>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</li>

<li class="comment">
    <div class="vcard">
        <img src="images/person_1.jpg" alt="Image placeholder">
    </div>
    <div class="comment-body">
        <h3>Jean Doe</h3>
        <div class="meta">January 9, 2018 at 2:21pm</div>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Pariatur quidem laborum necessitatibus, ipsam impedit vitae autem, eum officia, fugiat saepe enim sapiente iste iure! Quam voluptas earum impedit necessitatibus, nihil?</p>
        <p><a href="#" class="reply rounded">Reply</a></p>
    </div>
</li> *@